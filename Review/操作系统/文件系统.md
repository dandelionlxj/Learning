##一、文件的逻辑结构

### 1、无结构文件

### 2、有结构文件

**（1）顺序文件**

文件中的记录一个接一个地顺序排列（逻辑上），记录可以是定长的或可变长的。各个记录在物理上可以顺序存储或链式存储

1、串结构：记录之间的顺序与关键字无关

2、顺序结构：记录之间的顺序按关键字顺序排列

可变长记录的顺序文件无法实现随机存取，定长记录可以

定长记录、顺序结构的顺序文件可以快速检索（根据关键字快速找到记录）

**（2)索引文件**

按关键字建立索引，每个记录对应一个索引表项

**（3）索引顺序文件**

同样会为文件建立一张索引表，不同的是，并不是每个记录对应一个索引表项，而是一组记录对应一个索引表项



## 二、文件的物理结构（文件的分配方式）

### 1、连续分配

要求每个文件在磁盘上占有一组连续的快

优点：支持顺序访问和直接访问（即随机访问）；连续分配的文件在顺序读/写时速度最快

缺点：存储空间利用率低，会产生磁盘碎片，不方便文件拓展

### 2、链接分配

采用离散分配的方式，可以为文件分配离散的磁盘块。分为隐式和显示链接

**（1）隐式链接**

除文件的最后一个盘快之外，每个盘快中都存有指向下一个盘快的指针，文件目录包括文件第一块的指针和最后一块的指针

优点：很方便文件拓展，不会有碎片问题，外存利用率高

缺点：只支持顺序访问，不支持随机访问，查找效率低，指向下一个盘快的指针也需要耗费少量的存储空间

**（2）显式链接**

把用于链接文件个物理块的指针显示地存放在一张表中，即文件分配表（FAT）。一个磁盘只会建立一张文件分配表，开机时文件分配表放入内存，并常驻内存

优点：很方便文件拓展，不会有碎片问题，外存利用率高，并且支持随机访问。相比于隐式链接来说，地址转换时不需要访问磁盘，因此文件的访问效率更高

缺点：文件分配表需要占用一点的存储空间

### 3、索引分配

允许文件离散地分配中唉各个磁盘块中，系统会为每个文件建立一张索引表，索引表中记录了文件的各个逻辑块对应的物理块。索引表存放的磁盘块称为索引快，文件数据存放点饿磁盘块，称为数据快

若文件过大，索引表项太多，可以采取以下三种方法解决

（1）链接方案：将多个索引快链接起来存放

​      缺点：若文件很大，索引表很长，就导致磁盘i/o次数过多，查找效率低下

（2）多层索引：建立多层索引

缺点：即使是小文件，访问一个数据快依然需要K+1次读磁盘

（3）混合索引：多种索引方式的结合

优点：对于小文件，访问一个数据块所需的读磁盘次数更少



## 三、文件存储空间的管理方法

**1、空闲表法**

空闲表中记录每个连续空间区的起始盘块号、盘块数

**2、空闲链表法**

（1）空闲盘快链

以盘快为单位组成一条空闲链

（2）空闲盘区链

以盘区为单位组成一条空闲链

**3、位示图法**

**4、成组链接法**